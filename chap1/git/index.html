<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Maintainability - Version Control · Scientific Computing For Physicists</title><meta name="title" content="Maintainability - Version Control · Scientific Computing For Physicists"/><meta property="og:title" content="Maintainability - Version Control · Scientific Computing For Physicists"/><meta property="twitter:title" content="Maintainability - Version Control · Scientific Computing For Physicists"/><meta name="description" content="Documentation for Scientific Computing For Physicists."/><meta property="og:description" content="Documentation for Scientific Computing For Physicists."/><meta property="twitter:description" content="Documentation for Scientific Computing For Physicists."/><meta property="og:url" content="https://book.jinguo-group.science/chap1/git/"/><meta property="twitter:url" content="https://book.jinguo-group.science/chap1/git/"/><link rel="canonical" href="https://book.jinguo-group.science/chap1/git/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Computing For Physicists</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Become an Open-source Developer</span><ul><li><a class="tocitem" href="../terminal/">Get a Terminal!</a></li><li class="is-active"><a class="tocitem" href>Maintainability - Version Control</a></li><li><a class="tocitem" href="../ci/">Correctness - Unit Tests</a></li></ul></li><li><span class="tocitem">Julia Programming Language</span><ul><li><a class="tocitem" href="../../chap2/julia-setup/">Julia Programming Language</a></li><li><a class="tocitem" href="../../chap2/julia-why/">Why Julia?</a></li><li><a class="tocitem" href="../../chap2/julia-type/">Types and Multiple-dispatch</a></li><li><a class="tocitem" href="../../chap2/release/">My First Package</a></li><li><a class="tocitem" href="../../chap2/performance/">Understanding Performance</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Become an Open-source Developer</a></li><li class="is-active"><a href>Maintainability - Version Control</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Maintainability - Version Control</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/GiggleLiu/ScientificComputingForPhysicists" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/GiggleLiu/ScientificComputingForPhysicists/blob/main/docs/src/chap1/git.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Maintainability-Version-Control"><a class="docs-heading-anchor" href="#Maintainability-Version-Control">Maintainability - Version Control</a><a id="Maintainability-Version-Control-1"></a><a class="docs-heading-anchor-permalink" href="#Maintainability-Version-Control" title="Permalink"></a></h1><p>Maintaining a software project is not easy, especially when it comes to multiple developers working on the same piece of code. When adding a new feature to the project, maintainers may encounter the following problems:</p><ul><li>Multiple developers modify the same file at the same time, works can not be merged easily.</li><li>New code breaks an existing feature, downstream users are affected.</li></ul><p>The solution to the above problems is <strong>version-control</strong>. Among all version control software, <strong>git</strong> is the most popular one.</p><h3 id="Create-a-git-repository"><a class="docs-heading-anchor" href="#Create-a-git-repository">Create a git repository</a><a id="Create-a-git-repository-1"></a><a class="docs-heading-anchor-permalink" href="#Create-a-git-repository" title="Permalink"></a></h3><p>A git repository, also known as a repo, is basically a directory where your project lives and git keeps track of your file&#39;s history. To get started, you start with a terminal and type</p><pre><code class="language-bash hljs">cd path/to/working/directory
git init
echo &quot;Hello, World&quot; &gt; README.md
git add -A
git commit -m &#39;this is my initial commit&#39;
git status</code></pre><ul><li>Line 1: changes the directory to the working directory, which can be either an existing directory or a new directory.</li><li>Line 2: initializes a git repository in the working directory. A <code>.git</code> directory is created in the working directory, which contains all the necessary metadata for the repo.</li><li>Line 3: creates a file <code>README.md</code> with the content <code>Hello, World</code>. The file <code>README.md</code> is a <strong>markdown</strong> file, which is a lightweight markup language with plain-text-formatting syntax. You can learn more about markdown from the <a href="https://www.markdowntutorial.com/">markdown tutorial</a>. This line can be omitted if the working directory already contains files.</li><li>Line 4: line add files to the <strong>staging area</strong> (area that caches changes that to be committed).</li><li>Line 5: commits the changes to the repository, which will create a <strong>snapshot</strong> of your current work.</li><li>Line 6: shows the status of the working directory, staging area, and repository. If the above commands are executed correctly, the output should be <code>nothing to commit, working tree clean</code>.</li></ul><h3 id="Track-the-changes"><a class="docs-heading-anchor" href="#Track-the-changes">Track the changes</a><a id="Track-the-changes-1"></a><a class="docs-heading-anchor-permalink" href="#Track-the-changes" title="Permalink"></a></h3><p><strong>Git</strong> enables developers to track changes in their codebase. Continuing the previous example, we can analyze the repository with the following commands:</p><pre><code class="language-bash hljs">echo &quot;Bye Bye, World&quot; &gt; README.md
git diff
git add -A
git commit -m &#39;a second commit&#39;
git log
git checkout HEAD~1
git checkout main</code></pre><ul><li>Line 1: makes changes to the file <code>README.md</code>.</li><li>Line 2: shows the changes made to the file <code>README.md</code>.</li><li>Line 3-4: adds the changes to the staging area and commits the changes to the repository.</li><li>Line 5: shows the history of commits. The output should be something like this:</li></ul><pre><code class="nohighlight hljs">commit 02cd535b6d78fca1713784c61eec86e67ce9010c (HEAD -&gt; main)
Author: GiggleLiu &lt;cacate0129@gmail.com&gt;
Date:   Mon Feb 5 14:34:20 2024 +0800

    a second commit

commit 570e390759617a7021b0e069a3fbe612841b3e50
Author: GiggleLiu &lt;cacate0129@gmail.com&gt;
Date:   Mon Feb 5 14:23:41 2024 +0800

    this is my initial commit</code></pre><ul><li>Line 6: Checkout the previous snapshot. Note <code>HEAD</code> is your current snapshot and <code>HEAD~n</code> is the <code>n</code>th snapshot counting back from the current snapshot.</li><li>Line 7: Return to the <code>main</code> <strong>branch</strong>, which points to the latest snapshot. We will discuss more about <strong>branch</strong> later in this tutorial.</li></ul><p>You can use <code>git reset</code> to reset the current HEAD to the specified snapshot, which can be useful when you committed something bad by accident.</p><h3 id="Work-with-remote-repositories"><a class="docs-heading-anchor" href="#Work-with-remote-repositories">Work with remote repositories</a><a id="Work-with-remote-repositories-1"></a><a class="docs-heading-anchor-permalink" href="#Work-with-remote-repositories" title="Permalink"></a></h3><p>A server to store git repository, or <strong>remote</strong> in git terminology, is required for the collaboration purpose. Remote repositories can be hosted on git hosting services like GitHub, GitLab, or Bitbucket. After creating a new empty repository (no README files) on a git hosting service (<a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">How to create a new github repo?</a>), a URL for cloning the repo will show up, which that usually starts with <code>git</code> or <code>https</code>. Let us denote this URL as <code>&lt;url&gt;</code> and continue the previous example:</p><pre><code class="language-bash hljs">git remote add origin &lt;url&gt;
git remote -v
git push origin main</code></pre><ul><li>Line 1: add a remote repository, where <code>origin</code> is a tag for the added remote.</li><li>Line 2: shows the URL of all remotes, including the <code>origin</code> remote we just added.</li><li>Line 3: push commits to the <code>main</code> branch of the remote repository <code>origin</code>. This command sometimes could fail due to another commit pushed to the remote earlier, where the commit may from another machine or another person. To resolve the issue, you can use <code>git pull origin main</code> to fetch the latest snapshot on the remote. <code>git pull</code> may also fail, because the remote commit may be incompatible with the local commit, e.g. the same file has been changed. In this worst case, you need to merge two commits manually (link).</li></ul><h3 id="Develop-features-safely-branches"><a class="docs-heading-anchor" href="#Develop-features-safely-branches">Develop features safely - branches</a><a id="Develop-features-safely-branches-1"></a><a class="docs-heading-anchor-permalink" href="#Develop-features-safely-branches" title="Permalink"></a></h3><p>So far, we worked with a single branch <code>main</code>. A <strong>branch</strong> in git is a lightweight pointer to a specific commit. Working on a single branch is dangerous due to the following reasons:</p><ul><li><em>No usable code.</em> Developers usually develop features based on the current <code>main</code> branch, so the <code>main</code> branch is expected to always usable. However, working on a single branch can easily break this rule.</li><li><em>Hard to resolve conflicts.</em> when multiple developers modify the same file at the same time, works can not be merged easily. Multiple branches can make the feature development process independent of each other, which can avoid conflicts.</li><li><em>Hard to discard a feature.</em> For some experimental features, you may want to discard it after testing. A commit on the main branch can not be easily reverted.</li></ul><p>Understanding the branches is extremely useful when, multiple developers are working on different features.</p><pre><code class="language-bash hljs">git checkout -b me/feature
echo &quot;Hello, World - Version 2&quot; &gt; README.md
git add -A
git commit -m &#39;this is my feature&#39;
git push origin me/feature</code></pre><ul><li>Line 1: create and switch to the new branch <code>me/feature</code>. Here, we use the branch name <code>me/feature</code> to indicate that this branch is for the feature developed by <code>me</code>, which is a matter of convention.</li><li>Line 2-5: makes some changes to the file <code>README.md</code> and commits the changes to the repository. Finally, the changes are pushed to the remote repository <code>origin</code>. The remote branch <code>me/feature</code> is created automatically.</li></ul><p>While developing a feature, you or another developer may want to develop another feature based on the current <code>main</code> branch. You can create another branch <code>other/feature</code> and develop the feature there.</p><pre><code class="language-bash hljs">git checkout main
git checkout -b other/feature
echo &quot;Bye Bye, World - Version 2&quot; &gt; feature.md
git add -A
git commit -m &#39;this is another feature&#39;
git push origin other/feature</code></pre><p>In the above example, we created a new branch <code>other/feature</code> based on the <code>main</code> branch, and made some changes to the file <code>feature.md</code>.</p><p>Finally, when the feature is ready, you can merge the feature branch to the main branch.</p><pre><code class="language-bash hljs">git checkout main
git merge me/feature
git push origin main</code></pre><h3 id="Working-with-others-issues-and-pull-requests"><a class="docs-heading-anchor" href="#Working-with-others-issues-and-pull-requests">Working with others - issues and pull requests</a><a id="Working-with-others-issues-and-pull-requests-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-others-issues-and-pull-requests" title="Permalink"></a></h3><p>When working with others, you may want to propose changes to a repository and discuss them with others. This is where <strong>issues</strong> and <strong>pull requests</strong> come in. Issues and pull requests are features of git hosting services like GitHub and GitLab.</p><ul><li><strong>Issue</strong> is relatively simple, it is a way to report a bug or request a feature.</li><li><strong>Pull request</strong> (resource: <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request">how to create a pull request</a>) is a way to propose changes to a repository and discuss them with others. It is also a way to merge code from source branch to target branch. The source branch can be a branch in the same repository or a branch in a <strong>forked repository</strong> - a copy of the repository in your account. Forking a repository is needed when you want to propose changes to a repository that you do not have write access to.</li></ul><div class="admonition is-info"><header class="admonition-header">Should I make a pull requests or push directly to main branch?</header><div class="admonition-body"><p>To update the main branch, one should use pull requests as much as possible, even if you have write access to the repository. It is a good practice to discuss the changes with others before merging them to the main branch. A pull request also makes the changes more traceable, which is useful when you want to revert the changes.</p></div></div><h3 id="Summary:-a-cheat-sheet"><a class="docs-heading-anchor" href="#Summary:-a-cheat-sheet">Summary: a cheat sheet</a><a id="Summary:-a-cheat-sheet-1"></a><a class="docs-heading-anchor-permalink" href="#Summary:-a-cheat-sheet" title="Permalink"></a></h3><p>It is not possible to cover all the feature of git. We will list a few useful commands and resources for git learning.</p><pre><code class="nohighlight hljs"># global config
git config  # Get and set repository or global options

# initialize a repo
git init    # Create an empty Git repo or reinitialize an existing one
git clone   # Clone repository into new directory

# info
git status  # Show the working tree status
git log     # Show commit logs
git diff    # Show changes between commits, commit and working tree, etc

# work on a branch
git add     # Add file contents to the index
git rm      # Remove files from the working tree and from the index
git commit  # Record changes to the repository
git reset   # Reset current HEAD to the specified state

# branch manipulation
git checkout # Switch branches or restore working tree files
git branch  # List, create, or delete branches
git merge   # Join two or more development histories together

# remote synchronization
git remote  # Manage set of tracked repositories
git pull  # Fetch from and integrate with another repo or a local branch
git fetch   # Download objects and refs from another repository
git push    # Update remote refs along with associated objects</code></pre><h3 id="Resources"><a class="docs-heading-anchor" href="#Resources">Resources</a><a id="Resources-1"></a><a class="docs-heading-anchor-permalink" href="#Resources" title="Permalink"></a></h3><ul><li><a href="https://githubtraining.github.io/training-manual/book.pdf">The Official GitHub Training Manual</a></li><li>MIT online course <a href="https://missing.csail.mit.edu/2020/">missing semester</a>.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../terminal/">« Get a Terminal!</a><a class="docs-footer-nextpage" href="../ci/">Correctness - Unit Tests »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 9 February 2024 15:56">Friday 9 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
