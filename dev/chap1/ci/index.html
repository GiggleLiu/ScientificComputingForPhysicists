<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Correctness - Unit Tests · Scientific Computing For Physicists</title><meta name="title" content="Correctness - Unit Tests · Scientific Computing For Physicists"/><meta property="og:title" content="Correctness - Unit Tests · Scientific Computing For Physicists"/><meta property="twitter:title" content="Correctness - Unit Tests · Scientific Computing For Physicists"/><meta name="description" content="Documentation for Scientific Computing For Physicists."/><meta property="og:description" content="Documentation for Scientific Computing For Physicists."/><meta property="twitter:description" content="Documentation for Scientific Computing For Physicists."/><meta property="og:url" content="https://book.jinguo-group.science/chap1/ci/"/><meta property="twitter:url" content="https://book.jinguo-group.science/chap1/ci/"/><link rel="canonical" href="https://book.jinguo-group.science/chap1/ci/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Computing For Physicists</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Become an Open-source Developer</span><ul><li><a class="tocitem" href="../terminal/">Get a Terminal!</a></li><li><a class="tocitem" href="../git/">Maintainability - Version Control</a></li><li class="is-active"><a class="tocitem" href>Correctness - Unit Tests</a><ul class="internal"><li><a class="tocitem" href="#Unit-Test"><span>Unit Test</span></a></li><li><a class="tocitem" href="#Automate-your-workflow-CI/CD"><span>Automate your workflow - CI/CD</span></a></li></ul></li></ul></li><li><span class="tocitem">Julia Programming Language</span><ul><li><a class="tocitem" href="../../chap2/julia-setup/">Setup Julia</a></li><li><a class="tocitem" href="../../chap2/julia-why/">Why Julia?</a></li><li><a class="tocitem" href="../../chap2/julia-type/">Types and Multiple-dispatch</a></li><li><a class="tocitem" href="../../chap2/julia-array/">Array and Broadcasting</a></li><li><a class="tocitem" href="../../chap2/julia-release/">My First Package</a></li><li><a class="tocitem" href="../../chap2/julia-fluid/">Project: Fluid dynamics</a></li></ul></li><li><span class="tocitem">Linear Algebra</span><ul><li><a class="tocitem" href="../../chap3/linalg/">Matrix Computation</a></li><li><a class="tocitem" href="../../chap3/lu/">Solving linear equations by LU factorization: Bottom-up</a></li><li><a class="tocitem" href="../../chap3/qr/">QR Factorization: Bottom-up</a></li><li><a class="tocitem" href="../../chap3/fft/">Fast Fourier transform</a></li><li><a class="tocitem" href="../../chap3/sensitivity/">Sensitivity Analysis</a></li><li><a class="tocitem" href="../../chap3/tensors/">Tensor Operations</a></li><li><a class="tocitem" href="../../chap3/cuda/">Arrays on GPU</a></li><li><a class="tocitem" href="../../chap3/sparse/">Sparse Matrices and Graphs</a></li></ul></li><li><span class="tocitem">Appendix</span><ul><li><a class="tocitem" href="../../append/plotting/">Plotting recipes with CairoMakie</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Become an Open-source Developer</a></li><li class="is-active"><a href>Correctness - Unit Tests</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Correctness - Unit Tests</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/GiggleLiu/ScientificComputingForPhysicists" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/GiggleLiu/ScientificComputingForPhysicists/blob/main/docs/src/chap1/ci.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Correctness-Unit-Tests"><a class="docs-heading-anchor" href="#Correctness-Unit-Tests">Correctness - Unit Tests</a><a id="Correctness-Unit-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Correctness-Unit-Tests" title="Permalink"></a></h1><p>In terms of scientific computing, accuracy of your result is most certainly more important than anything else. Checking the correctness is definitely one of the most challenging tasks in software development. Consider the following scenario:</p><div class="admonition is-category-question"><header class="admonition-header">The problem of code review</header><div class="admonition-body"><p>Suppose you are one of the maintainers of the Julia programming language. One day, a GitHub user Oscar Smith submitted a <a href="https://github.com/JuliaLang/julia/pull/51319">6k-line PR</a> to the <code>JuliaLang/julia</code> repository: <img src="../../assets/images/memorypr.png" alt/></p><p>You want to check if this huge PR did something expected, requiring the following conditions to be satisfied:</p><ul><li>The build is successfully on Linux, macOS and Windows.</li><li>No existing feature breaks.</li><li>The added feature does something expected.</li></ul><p>What would you do?</p><ol><li>Checking to the 128 changed files line-by-line with human eye.</li><li>Hire a part-time worker, try installing the PR on three fresh machines, and try using as many features as possible and see if anything breaks.</li><li>Something more efficient.</li></ol></div></div><p>In the above scenario, the first option is not reliable for a software project expected to be used by millions of users. The second option is too expensive and time-consuming. Clever software engineers have come up with a more efficient way to check the correctness of the code, which is to use <strong>Unit Tests</strong> and <strong>CI/CD</strong>.</p><h2 id="Unit-Test"><a class="docs-heading-anchor" href="#Unit-Test">Unit Test</a><a id="Unit-Test-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Test" title="Permalink"></a></h2><p><a href="https://en.wikipedia.org/wiki/Unit_testing">Unit Tests</a> is a software a testing method for the smallest testable <strong>unit</strong> of an application, e.g. functions. Unit tests are composed of a series of individual test cases, each of which is composed of:</p><ul><li>a collection of inputs and expected outputs for a function.</li><li>an <strong>assertion</strong> statement to verify the function returns the expected output for a given input.</li></ul><p>To verify the correctness of the code, we run the unit tests. If the tests pass and the coverage is high, we can be confident that the code is working as expected.</p><ul><li>Tests pass: all assertions in the test cases are true.</li><li>Test coverage: the percentage of the code that is covered by tests, i.e. the higher the coverage, the more <strong>robust</strong> the code is.</li></ul><p>In Julia, <a href="https://docs.julialang.org/en/v1/stdlib/Test/">Test</a> is a built-in package for writing and running unit tests. We will learn how to write and run unit tests in the section <a href="../../chap2/julia-release/#My-First-Package">My First Package</a>.</p><h2 id="Automate-your-workflow-CI/CD"><a class="docs-heading-anchor" href="#Automate-your-workflow-CI/CD">Automate your workflow - CI/CD</a><a id="Automate-your-workflow-CI/CD-1"></a><a class="docs-heading-anchor-permalink" href="#Automate-your-workflow-CI/CD" title="Permalink"></a></h2><p>You still need to set up three clean machines to run the tests. What if you do not have three machines? The key to solving this problem is to automate the workflow on the cloud with the containerization technology, e.g. <a href="https://www.docker.com/">Docker</a>. You do not need to configure the dockers on the cloud manually. Instead, you can use a <a href="https://en.wikipedia.org/wiki/CI/CD">Continuous Integration/Continuous Deployment (CI/CD)</a> service to automate the workflow of</p><ul><li>(CI) <strong>build</strong>, <strong>test</strong> and <strong>merge</strong> the code changes whenever a developer commits code to the repository.</li><li>(CD) <strong>deploy</strong> the code or documentation to a cloud service and <strong>register</strong> the package to the package registry.</li></ul><p>CI/CD are often integrated with git hosting services, e.g. <a href="https://docs.github.com/en/actions">Github Actions</a>. A typical CI/CD pipeline include the following steps:</p><ul><li>code updated detected,</li><li>for each task, initialize a virtual machine on the cloud,</li><li>the virtual machine initializes the environment and runs the tests,</li><li>the virtual machine reports the test results.</li></ul><p>The tasks of CI/CD are often defined in a configuration file, e.g. <code>.github/workflows/ci.yml</code>. We will learn how to set up a CI/CD pipeline in the section <a href="../../chap2/julia-release/#My-First-Package">My First Package</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../git/">« Maintainability - Version Control</a><a class="docs-footer-nextpage" href="../../chap2/julia-setup/">Setup Julia »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Wednesday 27 March 2024 09:27">Wednesday 27 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
